import{h as y}from"../../../assets/index-chunk.js";import{n as h}from"../../../assets/index-chunk2.js";var w=Object.defineProperty,m=(u,t,s,i)=>{for(var o=void 0,n=u.length-1,r;n>=0;n--)(r=u[n])&&(o=r(t,s,o)||o);return o&&w(t,s,o),o};class d extends y{constructor(){super(...arguments),this.label="",this.open=!1,this._setListeners=!1,this._firstListElement=null}handleItemSlotChange(t){var o;const i=t.target.assignedElements();this._firstListElement=i[0];for(let[n,r]of i.entries()){const l=r.tagName.toLowerCase();if(l==="nsc-menu-item"){r.setAttribute("role","listitem");let e=(o=r.shadowRoot)==null?void 0:o.querySelector("a");e==null||e.setAttribute("role","menuitem"),n===0?e==null||e.setAttribute("tabindex","0"):e==null||e.setAttribute("tabindex","-1")}this._setListeners||(l==="nsc-menu-item"||l==="nsc-submenu")&&r.addEventListener("keydown",e=>{var a,c,f,p;this._setListeners=!0,e.key==="ArrowLeft"?(this.open=!1,(c=(a=this.shadowRoot)==null?void 0:a.querySelector("a"))==null||c.focus(),e.preventDefault(),e.stopPropagation()):e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.handleArrowDown(e)):e.key==="ArrowUp"?(e.preventDefault(),e.stopPropagation(),this.handleArrowUp(e)):e.key==="Escape"&&(this.open=!1,e.preventDefault(),e.stopPropagation(),(p=(f=this.shadowRoot)==null?void 0:f.querySelector("a"))==null||p.focus())})}}handleSubmenuItemClicked(){this.open=!this.open}handleAnchorKeydown(t){switch(t.key){case"ArrowRight":this.open=!0,this.focusFirstSubmenuItem(),t.preventDefault();break;case"Enter":case" ":this.open=!this.open,this.focusFirstSubmenuItem(),t.preventDefault();break}}focusFirstSubmenuItem(){setTimeout(()=>{var t,s,i;(i=(s=(t=this._firstListElement)==null?void 0:t.shadowRoot)==null?void 0:s.querySelector("a"))==null||i.focus()},0)}handleArrowDown(t){var r,l,e,a;t.preventDefault();const s=this.querySelectorAll(":scope > nsc-menu-item, :scope > nsc-submenu"),i=this.querySelector(":focus");let o=Array.from(s).indexOf(i);o===-1&&((l=(r=s[0].shadowRoot)==null?void 0:r.querySelector("a"))==null||l.focus());let n=o+1;n>s.length-1&&(n=0),(a=(e=s[n].shadowRoot)==null?void 0:e.querySelector("a"))==null||a.focus()}handleArrowUp(t){var r,l;t.preventDefault();const s=this.querySelectorAll(":scope > nsc-menu-item, :scope > nsc-submenu"),i=this.querySelector(":focus");let n=Array.from(s).indexOf(i)-1;n<0&&(n=s.length-1),(l=(r=s[n].shadowRoot)==null?void 0:r.querySelector("a"))==null||l.focus()}}m([h({type:String})],d.prototype,"label");m([h({type:Boolean})],d.prototype,"open");export{d as N};
